{"remainingRequest":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/src/views/admin/Categories.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/src/views/admin/Categories.vue","mtime":1652845053000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/cache-loader/dist/cjs.js","mtime":1652859425000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/babel-loader/lib/index.js","mtime":1652859425000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/cache-loader/dist/cjs.js","mtime":1652859425000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vue-loader/lib/index.js","mtime":1652859425000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAnZmlyZWJhc2UnOw0KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc25hY2s6IGZhbHNlLA0KICAgICAgc25hY2tDb2xvcjogJycsDQogICAgICBzbmFja1RleHQ6ICcnLA0KICAgICAgc2VhcmNoOiAnJywNCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICBkaWFsb2c6IGZhbHNlLA0KICAgICAgaGVhZGVyczogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIkNhdGVnb3J5IE5hbWUiLA0KICAgICAgICAgIGFsaWduOiAic3RhcnQiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHZhbHVlOiAidGl0bGUiLA0KICAgICAgICB9LA0KICAgICAgICB7IHRleHQ6ICJDYXRlZ29yeSBJbWFnZSBVUkwiLCB2YWx1ZTogImltYWdlIiB9LA0KICAgICAgICB7IHRleHQ6ICJBY3Rpb25zIiwgdmFsdWU6ICJhY3Rpb25zIiwgc29ydGFibGU6IGZhbHNlIH0sDQogICAgICBdLA0KICAgICAgZWRpdGVkSW5kZXg6IC0xLA0KICAgICAgZWRpdGVkSXRlbTogew0KICAgICAgICB0aXRsZTogIiIsDQogICAgICAgIGltYWdlOiAiIiwNCiAgICAgIH0sDQogICAgICBkZWZhdWx0SXRlbTogew0KICAgICAgICB0aXRsZTogIiIsDQogICAgICAgIGltYWdlOiAiIiwNCiAgICAgIH0sDQogICAgICB0aXRsZVJ1bGU6IFsNCiAgICAgICAgdiA9PiAhIXYgfHwgJ0NhdGVnb3J5IG5hbWUgaXMgcmVxdWlyZWQnLA0KICAgICAgXSwNCiAgICAgIGltYWdlUnVsZTogWw0KICAgICAgICB2ID0+IC9eKD86KD86aHR0cHM/fGZ0cCk6XC9cLyk/KD86KD8hKD86MTB8MTI3KSg/OlwuXGR7MSwzfSl7M30pKD8hKD86MTY5XC4yNTR8MTkyXC4xNjgpKD86XC5cZHsxLDN9KXsyfSkoPyExNzJcLig/OjFbNi05XXwyXGR8M1swLTFdKSg/OlwuXGR7MSwzfSl7Mn0pKD86WzEtOV1cZD98MVxkXGR8MlswMV1cZHwyMlswLTNdKSg/OlwuKD86MT9cZHsxLDJ9fDJbMC00XVxkfDI1WzAtNV0pKXsyfSg/OlwuKD86WzEtOV1cZD98MVxkXGR8MlswLTRdXGR8MjVbMC00XSkpfCg/Oig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSg/OlwuKD86W2Etelx1MDBhMS1cdWZmZmYwLTldLSopKlthLXpcdTAwYTEtXHVmZmZmMC05XSspKig/OlwuKD86W2Etelx1MDBhMS1cdWZmZmZdezIsfSkpKSg/OjpcZHsyLDV9KT8oPzpcL1xTKik/JC8udGVzdCh2KSB8fCAnSW1hZ2UgbGluayBtdXN0IGJlIHZhbGlkJywNCiAgICAgIF0NCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEFjdGlvbnMoew0KICAgICAgICBsb2FkQ2F0ZWdvcmllczogJ2NhdGVnb3JpZXMvbG9hZENhdGVnb3JpZXMnLA0KICAgIH0pLA0KICAgIC4uLm1hcEdldHRlcnMoew0KICAgICAgICBjYXRlZ29yaWVzOiAnY2F0ZWdvcmllcy9nZXRDYXRlZ29yaWVzJw0KICAgIH0pLA0KICAgIGZvcm1UaXRsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICJOZXcgQ2F0ZWdvcnkiIDogIkVkaXQgQ2F0ZWdvcnkiOw0KICAgIH0sDQogIH0sDQoNCiAgd2F0Y2g6IHsNCiAgICBkaWFsb2codmFsKSB7DQogICAgICB2YWwgfHwgdGhpcy5jbG9zZSgpOw0KICAgIH0sDQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXRpYWxpemUoKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyh7DQogICAgICBhZGRDYXRlZ29yeTogJ2NhdGVnb3JpZXMvYWRkQ2F0ZWdvcnknLA0KICAgICAgdXBkYXRlQ2F0ZWdvcnk6ICdjYXRlZ29yaWVzL3VwZGF0ZUNhdGVnb3J5JywNCiAgICAgIHJlbW92ZUNhdGVnb3J5OiAnY2F0ZWdvcmllcy9yZW1vdmVDYXRlZ29yeScNCiAgICB9KSwNCiAgICBhc3luYyBpbml0aWFsaXplKCkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICB0cnkgew0KICAgICAgICAgIGF3YWl0IHRoaXMubG9hZENhdGVnb3JpZXM7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgIH0sDQogICAgc2VsZWN0RmlsZSgpIHsNCiAgICAgIGxldCBmaWxlID0gdGhpcy4kcmVmcy51cGxvYWRlci5maWxlc1swXTsNCiAgICAgIGlmIChmaWxlICE9IG51bGwgJiYgZmlsZS5uYW1lKSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgIGxldCByZWYgPSBzdG9yYWdlKCkNCiAgICAgICAgICAucmVmKCkNCiAgICAgICAgICAuY2hpbGQoImNhdGVnb3J5X2ltYWdlcy8iICsgZmlsZS5uYW1lKTsNCiAgICAgICAgbGV0IHZtID0gdGhpczsNCiAgICAgICAgcmVmLnB1dChmaWxlKS50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIGlmIChzbmFwc2hvdC5zdGF0ZSA9PSAic3VjY2VzcyIpIHsNCiAgICAgICAgICAgIHNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKGRvd25sb2FkVVJMKSB7DQogICAgICAgICAgICAgIHZtLmVkaXRlZEl0ZW0uaW1hZ2UgPSBkb3dubG9hZFVSTDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNuYWNrID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ2Vycm9yJw0KICAgICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnRmlsZSBjb3VsZCBub3QgYmUgdXBsb2FkZWQnOyANCiAgICAgICAgICB9DQogICAgICAgICAgZmlsZSA9IG51bGw7DQogICAgICAgIH0pOw0KICAgICAgfSANCiAgICAgIGVsc2Ugew0KICAgICAgICAvL3Jlc2ltIHNlw6dpbG1lZGkNCiAgICAgIH0NCiAgICB9LA0KICAgIGVkaXRJdGVtKGl0ZW0pIHsNCiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLmNhdGVnb3JpZXMuaW5kZXhPZihpdGVtKTsNCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOw0KICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOw0KICAgIH0sDQoNCiAgICBhc3luYyBkZWxldGVJdGVtKGl0ZW0pIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBpZiAoY29uZmlybSgiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGl0ZW0/IikpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUNhdGVnb3J5KGl0ZW0pOw0KICAgICAgICAgIHN0b3JhZ2UoKS5yZWZGcm9tVVJMKGl0ZW0uaW1hZ2UpLmRlbGV0ZSgpOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWU7DQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ3N1Y2Nlc3MnOw0KICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gJ0NhdGVnb3J5IGhhcyBiZWVuIGRlbGV0ZWQnOw0KDQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCg0KICAgICAgICAgIHRoaXMuc25hY2sgPSB0cnVlDQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ2Vycm9yJw0KICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gJ0NhdGVnb3J5IGNvdWxkIG5vdCBiZSBkZWxldGVkJw0KDQogICAgICAgICAgY29uc29sZS5lcnJvcihlKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCg0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSk7DQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBhc3luYyBzYXZlKCkgew0KICAgICAgaWYoIXRoaXMuJHJlZnMuZGlhbG9nRm9ybS52YWxpZGF0ZSgpKSByZXR1cm47DQogICAgICANCiAgICAgIGlmICh0aGlzLmVkaXRlZEluZGV4ID4gLTEpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUNhdGVnb3J5KHtpbmRleDogdGhpcy5lZGl0ZWRJbmRleCwgY2F0ZWdvcnk6IHRoaXMuZWRpdGVkSXRlbX0pOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCg0KICAgICAgICAgIHRoaXMuc25hY2sgPSB0cnVlDQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnQ2F0ZWdvcnkgaGFzIGJlZW4gdXBkYXRlZCcNCg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnZXJyb3InDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnQ2F0ZWdvcnkgY291bGQgbm90IGJlIHVwZGF0ZWQnDQoNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOyAgDQogICAgICAgIH0NCiAgICAgIH0gDQogICAgICBlbHNlIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLmFkZENhdGVnb3J5KHRoaXMuZWRpdGVkSXRlbSk7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnc3VjY2VzcycNCiAgICAgICAgICB0aGlzLnNuYWNrVGV4dCA9ICdDYXRlZ29yeSBhZGRlZCcNCg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnZXJyb3InDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnQ2F0ZWdvcnkgY291bGQgbm90IGJlIGNyZWF0ZWQnDQoNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgZmlsdGVyczogew0KICAgICAgICB0cnVuY2F0ZTogZnVuY3Rpb24gKHRleHQsIGxlbmd0aCwgc3VmZml4KSB7DQogICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPiBsZW5ndGgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbGVuZ3RoKSArIHN1ZmZpeDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["Categories.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Categories.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div>\r\n    <v-data-table :headers=\"headers\" :items=\"categories\"  :search=\"search\" class=\"elevation-1\" \r\n  :loading=\"loading\" loading-text=\"Loading... Please wait\">\r\n    <template v-slot:top>\r\n\r\n      <v-toolbar flat>\r\n        <v-toolbar-title>Categories</v-toolbar-title>\r\n        <v-divider class=\"mx-4\" inset vertical /> \r\n        <v-spacer />\r\n\r\n        <v-dialog v-model=\"dialog\" max-width=\"500px\">\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" >New Category</v-btn>\r\n          </template>\r\n          <v-card>\r\n\r\n            <v-card-title>\r\n              <span class=\"headline\">{{ formTitle }}</span>\r\n            </v-card-title>\r\n\r\n            <v-card-text>\r\n              <v-container>\r\n                <v-form v-bind:disabled=\"loading\" lazy-validation ref=\"dialogForm\">\r\n                  <v-row>\r\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                    <v-text-field :disabled=\"loading\" :rules=\"titleRule\" v-model=\"editedItem.title\" label=\"Category Name\"></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                    <input type=\"file\" class=\"d-none\" ref=\"uploader\" accept=\"image/*\" @change=\"selectFile()\">\r\n                    <v-text-field :rules=\"imageRule\" :disabled=\"loading\" v-model=\"editedItem.image\" label=\"Category Image Url\" prepend-icon=\"mdi-image\" @click:prepend=\"$refs.uploader.click()\">\r\n                    </v-text-field>\r\n                  </v-col>\r\n                </v-row>\r\n                </v-form>\r\n              </v-container>\r\n            </v-card-text>\r\n\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn :disabled=\"loading\" color=\"blue darken-1\" text @click=\"close\">Cancel</v-btn>\r\n              <v-btn :disabled=\"loading\" color=\"blue darken-1\" text @click=\"save\">Save</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <v-btn text icon class=\"mb-2 ml-2\" @click=\"initialize\">\r\n          <v-icon>mdi-refresh</v-icon>\r\n        </v-btn>\r\n        \r\n      </v-toolbar>\r\n    </template>\r\n\r\n    <template v-slot:[`item.image`]=\"{ value }\">\r\n      <a :href=\"value\" target=\"_blank\">\r\n        {{ value | truncate(20, '...') }}\r\n        <span class=\"mdi mdi-open-in-new\"></span>\r\n      </a>\r\n    </template>\r\n\r\n    <template v-slot:[`body.prepend`]=\"{ headers }\">\r\n        <tr class=\"mx-0 px-0\">\r\n          <td :colspan=\"headers.length\" class=\"mx-0 px-0\">\r\n            <v-text-field  v-model=\"search\" prepend-inner-icon=\"mdi-magnify\" label=\"Search\" single-line hide-details filled class=\"px-0 mx-0\"/>\r\n          </td>\r\n        </tr>\r\n    </template>\r\n\r\n    <template  v-slot:[`item.actions`]=\"{ item }\" >\r\n      <v-icon\r\n        small\r\n        class=\"mr-2\"\r\n        @click=\"editItem(item)\"\r\n      >\r\n        mdi-pencil\r\n      </v-icon>\r\n      <v-icon\r\n        small\r\n        @click=\"deleteItem(item)\"\r\n        color=\"error\"\r\n      >\r\n        mdi-delete\r\n      </v-icon>\r\n    </template>\r\n    <template v-slot:no-data>\r\n      <v-btn color=\"primary\" @click=\"initialize\">Reset</v-btn>\r\n    </template>\r\n  </v-data-table>\r\n\r\n  <v-snackbar v-model=\"snack\" :timeout=\"3000\" :color=\"snackColor\">\r\n      {{ snackText }}\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn v-bind=\"attrs\" text @click=\"snack = false\">Close</v-btn>\r\n      </template>\r\n  </v-snackbar>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { storage } from 'firebase';\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      snack: false,\r\n      snackColor: '',\r\n      snackText: '',\r\n      search: '',\r\n      loading: true,\r\n      dialog: false,\r\n      headers: [\r\n        {\r\n          text: \"Category Name\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          value: \"title\",\r\n        },\r\n        { text: \"Category Image URL\", value: \"image\" },\r\n        { text: \"Actions\", value: \"actions\", sortable: false },\r\n      ],\r\n      editedIndex: -1,\r\n      editedItem: {\r\n        title: \"\",\r\n        image: \"\",\r\n      },\r\n      defaultItem: {\r\n        title: \"\",\r\n        image: \"\",\r\n      },\r\n      titleRule: [\r\n        v => !!v || 'Category name is required',\r\n      ],\r\n      imageRule: [\r\n        v => /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/.test(v) || 'Image link must be valid',\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapActions({\r\n        loadCategories: 'categories/loadCategories',\r\n    }),\r\n    ...mapGetters({\r\n        categories: 'categories/getCategories'\r\n    }),\r\n    formTitle() {\r\n      return this.editedIndex === -1 ? \"New Category\" : \"Edit Category\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    dialog(val) {\r\n      val || this.close();\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.initialize();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions({\r\n      addCategory: 'categories/addCategory',\r\n      updateCategory: 'categories/updateCategory',\r\n      removeCategory: 'categories/removeCategory'\r\n    }),\r\n    async initialize() {\r\n        this.loading = true;\r\n        try {\r\n          await this.loadCategories;\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n        this.loading = false;\r\n    },\r\n    selectFile() {\r\n      let file = this.$refs.uploader.files[0];\r\n      if (file != null && file.name) {\r\n        this.loading = true;\r\n        let ref = storage()\r\n          .ref()\r\n          .child(\"category_images/\" + file.name);\r\n        let vm = this;\r\n        ref.put(file).then((snapshot) => {\r\n          this.loading = false;\r\n          if (snapshot.state == \"success\") {\r\n            snapshot.ref.getDownloadURL().then(function (downloadURL) {\r\n              vm.editedItem.image = downloadURL;\r\n            });\r\n          } else {\r\n            this.snack = true\r\n            this.snackColor = 'error'\r\n            this.snackText = 'File could not be uploaded'; \r\n          }\r\n          file = null;\r\n        });\r\n      } \r\n      else {\r\n        //resim seçilmedi\r\n      }\r\n    },\r\n    editItem(item) {\r\n      this.editedIndex = this.categories.indexOf(item);\r\n      this.editedItem = Object.assign({}, item);\r\n      this.dialog = true;\r\n    },\r\n\r\n    async deleteItem(item) {\r\n      this.loading = true;\r\n      if (confirm(\"Are you sure you want to delete this item?\")) {\r\n        this.loading = true;\r\n        try {\r\n          await this.removeCategory(item);\r\n          storage().refFromURL(item.image).delete();\r\n          this.loading = false;\r\n\r\n          this.snack = true;\r\n          this.snackColor = 'success';\r\n          this.snackText = 'Category has been deleted';\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Category could not be deleted'\r\n\r\n          console.error(e);\r\n        }\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    close() {\r\n      this.dialog = false;\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem);\r\n        this.editedIndex = -1;\r\n      });\r\n    },\r\n\r\n    async save() {\r\n      if(!this.$refs.dialogForm.validate()) return;\r\n      \r\n      if (this.editedIndex > -1) {\r\n        this.loading = true;\r\n        try {\r\n          await this.updateCategory({index: this.editedIndex, category: this.editedItem});\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'success'\r\n          this.snackText = 'Category has been updated'\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Category could not be updated'\r\n\r\n          console.error(e);  \r\n        }\r\n      } \r\n      else {\r\n        this.loading = true;\r\n        try {\r\n          await this.addCategory(this.editedItem);\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'success'\r\n          this.snackText = 'Category added'\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Category could not be created'\r\n\r\n          console.error(e);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  filters: {\r\n        truncate: function (text, length, suffix) {\r\n            if (text.length > length) {\r\n                return text.substring(0, length) + suffix;\r\n            } else {\r\n                return text;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>"]}]}