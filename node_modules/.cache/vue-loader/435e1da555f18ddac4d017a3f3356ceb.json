{"remainingRequest":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/src/views/admin/Sounds.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/src/views/admin/Sounds.vue","mtime":1652845053000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/cache-loader/dist/cjs.js","mtime":1652859425070},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/babel-loader/lib/index.js","mtime":1652859425349},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/cache-loader/dist/cjs.js","mtime":1652859425070},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vue-loader/lib/index.js","mtime":1652859425689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAnZmlyZWJhc2UnOw0KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc25hY2s6IGZhbHNlLA0KICAgICAgc25hY2tDb2xvcjogJycsDQogICAgICBzbmFja1RleHQ6ICcnLA0KICAgICAgc2VhcmNoOiAnJywNCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICBkaWFsb2c6IGZhbHNlLA0KICAgICAgaGVhZGVyczogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJ1NvdW5kIE5hbWUnLA0KICAgICAgICAgIGFsaWduOiAnc3RhcnQnLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHZhbHVlOiAidGl0bGUiLA0KICAgICAgICB9LA0KICAgICAgICB7IHRleHQ6ICdTb3VuZCBVUkwnLCB2YWx1ZTogJ3NvdW5kJyB9LA0KICAgICAgICB7IHRleHQ6ICdDYXRlZ29yeSBOYW1lJywgdmFsdWU6ICdjYXRlZ29yeV9pZCcgfSwNCiAgICAgICAgeyB0ZXh0OiAiQWN0aW9ucyIsIHZhbHVlOiAiYWN0aW9ucyIsIHNvcnRhYmxlOiBmYWxzZSB9LA0KICAgICAgXSwNCiAgICAgIGVkaXRlZEluZGV4OiAtMSwNCiAgICAgIGVkaXRlZEl0ZW06IHsNCiAgICAgICAgdGl0bGU6ICIiLA0KICAgICAgICBzb3VuZDogIiIsDQogICAgICB9LA0KICAgICAgZGVmYXVsdEl0ZW06IHsNCiAgICAgICAgdGl0bGU6ICIiLA0KICAgICAgICBzb3VuZDogIiIsDQogICAgICB9LA0KICAgICAgdGl0bGVSdWxlOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICdTb3VuZCBuYW1lIGlzIHJlcXVpcmVkJywNCiAgICAgIF0sDQogICAgICBzb3VuZFJ1bGU6IFsNCiAgICAgICAgdiA9PiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3QodikgfHwgJ1NvdW5kIGxpbmsgbXVzdCBiZSB2YWxpZCcsDQogICAgICBdLA0KICAgICAgY2F0ZWdvcnlSdWxlOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICdDYXRlZ29yeSBpcyByZXF1aXJlZCcNCiAgICAgIF0NCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEFjdGlvbnMoew0KICAgICAgICBsb2FkU291bmRzOiAnc291bmRzL2xvYWRTb3VuZHMnLA0KICAgICAgICBsb2FkQ2F0ZWdvcmllczogJ2NhdGVnb3JpZXMvbG9hZENhdGVnb3JpZXMnLA0KICAgIH0pLA0KICAgIC4uLm1hcEdldHRlcnMoew0KICAgICAgICBzb3VuZHM6ICdzb3VuZHMvZ2V0U291bmRzJywNCiAgICAgICAgY2F0ZWdvcmllczogJ2NhdGVnb3JpZXMvZ2V0Q2F0ZWdvcmllcycNCiAgICB9KSwNCiAgICBmb3JtVGl0bGUoKSB7DQogICAgICByZXR1cm4gdGhpcy5lZGl0ZWRJbmRleCA9PT0gLTEgPyAiTmV3IFNvdW5kIiA6ICJFZGl0IFNvdW5kIjsNCiAgICB9LA0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgZGlhbG9nKHZhbCkgew0KICAgICAgdmFsIHx8IHRoaXMuY2xvc2UoKTsNCiAgICB9LA0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0aWFsaXplKCk7DQoNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcEFjdGlvbnMoew0KICAgICAgYWRkU291bmQ6ICdzb3VuZHMvYWRkU291bmQnLA0KICAgICAgdXBkYXRlU291bmQ6ICdzb3VuZHMvdXBkYXRlU291bmQnLA0KICAgICAgcmVtb3ZlU291bmQ6ICdzb3VuZHMvcmVtb3ZlU291bmQnDQogICAgfSksDQogICAgZ2V0Q2F0ZWdvcnlCeUlkOiBmdW5jdGlvbihpZCkgew0KICAgICAgbGV0IGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaWVzLmZpbHRlcihjID0+IGMuaWQgPT0gaWQpWzBdOw0KICAgICAgaWYoY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICBjb25zb2xlLmxvZygndW5kZWZpbmVkIHFhcsWfaW0nKTsNCiAgICAgICAgcmV0dXJuIHt0aXRsZTogJ1Vua25vd24nfTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBjYXRlZ29yeTsNCiAgICB9LA0KICAgIGFzeW5jIGluaXRpYWxpemUoKSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU291bmRzOw0KICAgICAgICAgIGF3YWl0IHRoaXMubG9hZENhdGVnb3JpZXM7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgIH0sDQogICAgc2VsZWN0RmlsZSgpIHsNCiAgICAgIGxldCBmaWxlID0gdGhpcy4kcmVmcy51cGxvYWRlci5maWxlc1swXTsNCiAgICAgIGlmIChmaWxlICE9IG51bGwgJiYgZmlsZS5uYW1lKSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgIGxldCByZWYgPSBzdG9yYWdlKCkNCiAgICAgICAgICAucmVmKCkNCiAgICAgICAgICAuY2hpbGQoInNvdW5kcy8iICsgZmlsZS5uYW1lKTsNCiAgICAgICAgbGV0IHZtID0gdGhpczsNCiAgICAgICAgcmVmLnB1dChmaWxlKS50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIGlmIChzbmFwc2hvdC5zdGF0ZSA9PSAic3VjY2VzcyIpIHsNCiAgICAgICAgICAgIHNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKGRvd25sb2FkVVJMKSB7DQogICAgICAgICAgICAgIHZtLmVkaXRlZEl0ZW0uc291bmQgPSBkb3dubG9hZFVSTDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNuYWNrID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ2Vycm9yJw0KICAgICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnRmlsZSBjb3VsZCBub3QgYmUgdXBsb2FkZWQnOyANCiAgICAgICAgICB9DQogICAgICAgICAgZmlsZSA9IG51bGw7DQogICAgICAgIH0pOw0KICAgICAgfSANCiAgICAgIGVsc2Ugew0KICAgICAgICAvL23DvHppayBzZcOnaWxtZWRpDQogICAgICB9DQogICAgfSwNCiAgICBlZGl0SXRlbShpdGVtKSB7DQogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5zb3VuZHMuaW5kZXhPZihpdGVtKTsNCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOw0KICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOw0KICAgIH0sDQoNCiAgICBhc3luYyBkZWxldGVJdGVtKGl0ZW0pIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBpZiAoY29uZmlybSgiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGl0ZW0/IikpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVNvdW5kKGl0ZW0pOw0KICAgICAgICAgIHN0b3JhZ2UoKS5yZWZGcm9tVVJMKGl0ZW0uc291bmQpLmRlbGV0ZSgpOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWU7DQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ3N1Y2Nlc3MnOw0KICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gJ1NvdW5kIGhhcyBiZWVuIGRlbGV0ZWQnOw0KDQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCg0KICAgICAgICAgIHRoaXMuc25hY2sgPSB0cnVlDQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ2Vycm9yJw0KICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gJ1NvdW5kIGNvdWxkIG5vdCBiZSBkZWxldGVkJw0KDQogICAgICAgICAgY29uc29sZS5lcnJvcihlKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCg0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSk7DQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBhc3luYyBzYXZlKCkgew0KICAgICAgaWYoIXRoaXMuJHJlZnMuZGlhbG9nRm9ybS52YWxpZGF0ZSgpKSByZXR1cm47DQogICAgICANCiAgICAgIGlmICh0aGlzLmVkaXRlZEluZGV4ID4gLTEpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNvdW5kKHtpbmRleDogdGhpcy5lZGl0ZWRJbmRleCwgc291bmQ6IHRoaXMuZWRpdGVkSXRlbX0pOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCg0KICAgICAgICAgIHRoaXMuc25hY2sgPSB0cnVlDQogICAgICAgICAgdGhpcy5zbmFja0NvbG9yID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnU291bmQgaGFzIGJlZW4gdXBkYXRlZCcNCg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnZXJyb3InDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnU291bmQgY291bGQgbm90IGJlIHVwZGF0ZWQnDQoNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOyAgDQogICAgICAgIH0NCiAgICAgIH0gDQogICAgICBlbHNlIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBhd2FpdCB0aGlzLmFkZFNvdW5kKHRoaXMuZWRpdGVkSXRlbSk7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnc3VjY2VzcycNCiAgICAgICAgICB0aGlzLnNuYWNrVGV4dCA9ICdTb3VuZCBoYXMgYmVlbiBhZGRlZCcNCg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jbG9zZSgpOw0KDQogICAgICAgICAgdGhpcy5zbmFjayA9IHRydWUNCiAgICAgICAgICB0aGlzLnNuYWNrQ29sb3IgPSAnZXJyb3InDQogICAgICAgICAgdGhpcy5zbmFja1RleHQgPSAnU291bmQgY291bGQgbm90IGJlIGNyZWF0ZWQnDQoNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgZmlsdGVyczogew0KICAgICAgICB0cnVuY2F0ZTogZnVuY3Rpb24gKHRleHQsIGxlbmd0aCwgc3VmZml4KSB7DQogICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPiBsZW5ndGgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbGVuZ3RoKSArIHN1ZmZpeDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["Sounds.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Sounds.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div>\r\n    <v-data-table :headers=\"headers\" :items=\"sounds\"  :search=\"search\" class=\"elevation-1\" \r\n  :loading=\"loading\" loading-text=\"Loading... Please wait\">\r\n    <template v-slot:top>\r\n\r\n      <v-toolbar flat>\r\n        <v-toolbar-title>Sounds</v-toolbar-title>\r\n        <v-divider class=\"mx-4\" inset vertical /> \r\n        <v-spacer />\r\n\r\n        <v-dialog v-model=\"dialog\" max-width=\"500px\">\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" >New Sound</v-btn>\r\n          </template>\r\n          <v-card>\r\n\r\n            <v-card-title>\r\n              <span class=\"headline\">{{ formTitle }}</span>\r\n            </v-card-title>\r\n\r\n            <v-card-text>\r\n              <v-container>\r\n                <v-form v-bind:disabled=\"loading\" lazy-validation ref=\"dialogForm\">\r\n                  <v-row>\r\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                    <v-text-field :disabled=\"loading\" :rules=\"titleRule\" v-model=\"editedItem.title\" label=\"Sound Name\"></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n                    <input type=\"file\" class=\"d-none\" ref=\"uploader\" accept=\".mp3\" @change=\"selectFile()\">\r\n                    <v-text-field :rules=\"soundRule\" :disabled=\"loading\" v-model=\"editedItem.sound\" label=\"Sound Url\" prepend-icon=\"mdi-music-box\" @click:prepend=\"$refs.uploader.click()\">\r\n                    </v-text-field>\r\n                  </v-col>\r\n\r\n                  <v-col cols=\"12\" sm=\"12\" md=\"12\">                    \r\n                    <v-select :items=\"categories\" :rules=\"categoryRule\" v-model=\"editedItem.category_id\" name=\"category\" \r\n                    item-text=\"title\" item-value=\"id\" label=\"Select a category\" solo ></v-select>\r\n                  </v-col>\r\n\r\n                </v-row>\r\n                </v-form>\r\n              </v-container>\r\n            </v-card-text>\r\n\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn :disabled=\"loading\" color=\"blue darken-1\" text @click=\"close\">Cancel</v-btn>\r\n              <v-btn :disabled=\"loading\" color=\"blue darken-1\" text @click=\"save\">Save</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <v-btn text icon class=\"mb-2 ml-2\" @click=\"initialize\">\r\n          <v-icon>mdi-refresh</v-icon>\r\n        </v-btn>\r\n        \r\n      </v-toolbar>\r\n    </template>\r\n\r\n    <template v-slot:[`item.sound`]=\"{ value }\">\r\n      <a :href=\"value\" target=\"_blank\">\r\n        {{ value | truncate(20, '...') }}\r\n        <span class=\"mdi mdi-open-in-new\"></span>\r\n      </a>\r\n    </template>\r\n\r\n    <template v-slot:[`item.category_id`]=\"{ value }\">\r\n      {{ getCategoryById(value).title }}\r\n    </template>\r\n\r\n\r\n    <template v-slot:[`body.prepend`]=\"{ headers }\">\r\n        <tr class=\"mx-0 px-0\">\r\n          <td :colspan=\"headers.length\" class=\"mx-0 px-0\">\r\n            <v-text-field  v-model=\"search\" prepend-inner-icon=\"mdi-magnify\" label=\"Search\" single-line hide-details filled class=\"px-0 mx-0\"/>\r\n          </td>\r\n        </tr>\r\n    </template>\r\n\r\n    <template  v-slot:[`item.actions`]=\"{ item }\" >\r\n      <v-icon\r\n        small\r\n        class=\"mr-2\"\r\n        @click=\"editItem(item)\"\r\n      >\r\n        mdi-pencil\r\n      </v-icon>\r\n      <v-icon\r\n        small\r\n        @click=\"deleteItem(item)\"\r\n        color=\"error\">\r\n        mdi-delete\r\n      </v-icon>\r\n    </template>\r\n    <template v-slot:no-data>\r\n      <v-btn color=\"primary\" @click=\"initialize\">Reset</v-btn>\r\n    </template>\r\n  </v-data-table>\r\n\r\n  <v-snackbar v-model=\"snack\" :timeout=\"3000\" :color=\"snackColor\">\r\n      {{ snackText }}\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn v-bind=\"attrs\" text @click=\"snack = false\">Close</v-btn>\r\n      </template>\r\n  </v-snackbar>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { storage } from 'firebase';\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      snack: false,\r\n      snackColor: '',\r\n      snackText: '',\r\n      search: '',\r\n      loading: true,\r\n      dialog: false,\r\n      headers: [\r\n        {\r\n          text: 'Sound Name',\r\n          align: 'start',\r\n          sortable: true,\r\n          value: \"title\",\r\n        },\r\n        { text: 'Sound URL', value: 'sound' },\r\n        { text: 'Category Name', value: 'category_id' },\r\n        { text: \"Actions\", value: \"actions\", sortable: false },\r\n      ],\r\n      editedIndex: -1,\r\n      editedItem: {\r\n        title: \"\",\r\n        sound: \"\",\r\n      },\r\n      defaultItem: {\r\n        title: \"\",\r\n        sound: \"\",\r\n      },\r\n      titleRule: [\r\n        v => !!v || 'Sound name is required',\r\n      ],\r\n      soundRule: [\r\n        v => /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/.test(v) || 'Sound link must be valid',\r\n      ],\r\n      categoryRule: [\r\n        v => !!v || 'Category is required'\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapActions({\r\n        loadSounds: 'sounds/loadSounds',\r\n        loadCategories: 'categories/loadCategories',\r\n    }),\r\n    ...mapGetters({\r\n        sounds: 'sounds/getSounds',\r\n        categories: 'categories/getCategories'\r\n    }),\r\n    formTitle() {\r\n      return this.editedIndex === -1 ? \"New Sound\" : \"Edit Sound\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    dialog(val) {\r\n      val || this.close();\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.initialize();\r\n\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      addSound: 'sounds/addSound',\r\n      updateSound: 'sounds/updateSound',\r\n      removeSound: 'sounds/removeSound'\r\n    }),\r\n    getCategoryById: function(id) {\r\n      let category = this.categories.filter(c => c.id == id)[0];\r\n      if(category === undefined) {\r\n        console.log('undefined qarşim');\r\n        return {title: 'Unknown'};\r\n      }\r\n      return category;\r\n    },\r\n    async initialize() {\r\n        this.loading = true;\r\n        try {\r\n          await this.loadSounds;\r\n          await this.loadCategories;\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n        this.loading = false;\r\n    },\r\n    selectFile() {\r\n      let file = this.$refs.uploader.files[0];\r\n      if (file != null && file.name) {\r\n        this.loading = true;\r\n        let ref = storage()\r\n          .ref()\r\n          .child(\"sounds/\" + file.name);\r\n        let vm = this;\r\n        ref.put(file).then((snapshot) => {\r\n          this.loading = false;\r\n          if (snapshot.state == \"success\") {\r\n            snapshot.ref.getDownloadURL().then(function (downloadURL) {\r\n              vm.editedItem.sound = downloadURL;\r\n            });\r\n          } else {\r\n            this.snack = true\r\n            this.snackColor = 'error'\r\n            this.snackText = 'File could not be uploaded'; \r\n          }\r\n          file = null;\r\n        });\r\n      } \r\n      else {\r\n        //müzik seçilmedi\r\n      }\r\n    },\r\n    editItem(item) {\r\n      this.editedIndex = this.sounds.indexOf(item);\r\n      this.editedItem = Object.assign({}, item);\r\n      this.dialog = true;\r\n    },\r\n\r\n    async deleteItem(item) {\r\n      this.loading = true;\r\n      if (confirm(\"Are you sure you want to delete this item?\")) {\r\n        this.loading = true;\r\n        try {\r\n          await this.removeSound(item);\r\n          storage().refFromURL(item.sound).delete();\r\n          this.loading = false;\r\n\r\n          this.snack = true;\r\n          this.snackColor = 'success';\r\n          this.snackText = 'Sound has been deleted';\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Sound could not be deleted'\r\n\r\n          console.error(e);\r\n        }\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    close() {\r\n      this.dialog = false;\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem);\r\n        this.editedIndex = -1;\r\n      });\r\n    },\r\n\r\n    async save() {\r\n      if(!this.$refs.dialogForm.validate()) return;\r\n      \r\n      if (this.editedIndex > -1) {\r\n        this.loading = true;\r\n        try {\r\n          await this.updateSound({index: this.editedIndex, sound: this.editedItem});\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'success'\r\n          this.snackText = 'Sound has been updated'\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Sound could not be updated'\r\n\r\n          console.error(e);  \r\n        }\r\n      } \r\n      else {\r\n        this.loading = true;\r\n        try {\r\n          await this.addSound(this.editedItem);\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'success'\r\n          this.snackText = 'Sound has been added'\r\n\r\n        } catch (e) {\r\n          this.loading = false;\r\n          this.close();\r\n\r\n          this.snack = true\r\n          this.snackColor = 'error'\r\n          this.snackText = 'Sound could not be created'\r\n\r\n          console.error(e);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  filters: {\r\n        truncate: function (text, length, suffix) {\r\n            if (text.length > length) {\r\n                return text.substring(0, length) + suffix;\r\n            } else {\r\n                return text;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>"]}]}