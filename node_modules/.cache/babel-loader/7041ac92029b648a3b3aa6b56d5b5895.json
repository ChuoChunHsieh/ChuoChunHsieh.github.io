{"remainingRequest":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/thread-loader/dist/cjs.js!/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/babel-loader/lib/index.js!/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vuetify/lib/components/VSlider/VSlider.js","dependencies":[{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/vuetify/lib/components/VSlider/VSlider.js","mtime":1652859429000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/cache-loader/dist/cjs.js","mtime":1652859425000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/thread-loader/dist/cjs.js","mtime":1652859424000},{"path":"/Users/qiushunqun/Desktop/_謝卓君/ChuoChunHsieh/node_modules/babel-loader/lib/index.js","mtime":1652859425000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9xaXVzaHVucXVuL0Rlc2t0b3AvX1x1OEIxRFx1NTM1M1x1NTQxQi9DaHVvQ2h1bkhzaWVoL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9xaXVzaHVucXVuL0Rlc2t0b3AvX1x1OEIxRFx1NTM1M1x1NTQxQi9DaHVvQ2h1bkhzaWVoL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WU2xpZGVyL1ZTbGlkZXIuc2FzcyI7IC8vIENvbXBvbmVudHMKCmltcG9ydCBWSW5wdXQgZnJvbSAnLi4vVklucHV0JzsKaW1wb3J0IHsgVlNjYWxlVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb25zJzsgLy8gTWl4aW5zCgppbXBvcnQgbWl4aW5zIGZyb20gJy4uLy4uL3V0aWwvbWl4aW5zJzsKaW1wb3J0IExvYWRhYmxlIGZyb20gJy4uLy4uL21peGlucy9sb2FkYWJsZSc7IC8vIERpcmVjdGl2ZXMKCmltcG9ydCBDbGlja091dHNpZGUgZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9jbGljay1vdXRzaWRlJzsgLy8gSGVscGVycwoKaW1wb3J0IHsgYWRkT25jZUV2ZW50TGlzdGVuZXIsIGRlZXBFcXVhbCwga2V5Q29kZXMsIGNyZWF0ZVJhbmdlLCBjb252ZXJ0VG9Vbml0LCBwYXNzaXZlU3VwcG9ydGVkIH0gZnJvbSAnLi4vLi4vdXRpbC9oZWxwZXJzJzsKaW1wb3J0IHsgY29uc29sZVdhcm4gfSBmcm9tICcuLi8uLi91dGlsL2NvbnNvbGUnOwpleHBvcnQgZGVmYXVsdCBtaXhpbnMoVklucHV0LCBMb2FkYWJsZQovKiBAdnVlL2NvbXBvbmVudCAqLwopLmV4dGVuZCh7CiAgbmFtZTogJ3Ytc2xpZGVyJywKICBkaXJlY3RpdmVzOiB7CiAgICBDbGlja091dHNpZGU6IENsaWNrT3V0c2lkZQogIH0sCiAgbWl4aW5zOiBbTG9hZGFibGVdLAogIHByb3BzOiB7CiAgICBkaXNhYmxlZDogQm9vbGVhbiwKICAgIGludmVyc2VMYWJlbDogQm9vbGVhbiwKICAgIG1heDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiAxMDAKICAgIH0sCiAgICBtaW46IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHN0ZXA6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHRodW1iQ29sb3I6IFN0cmluZywKICAgIHRodW1iTGFiZWw6IHsKICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodikgewogICAgICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nIHx8IHYgPT09ICdhbHdheXMnOwogICAgICB9CiAgICB9LAogICAgdGh1bWJTaXplOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDMyCiAgICB9LAogICAgdGlja0xhYmVsczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdGlja3M6IHsKICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2KSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiB2ID09PSAnYm9vbGVhbicgfHwgdiA9PT0gJ2Fsd2F5cyc7CiAgICAgIH0KICAgIH0sCiAgICB0aWNrU2l6ZTogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiAyCiAgICB9LAogICAgdHJhY2tDb2xvcjogU3RyaW5nLAogICAgdHJhY2tGaWxsQ29sb3I6IFN0cmluZywKICAgIHZhbHVlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgdmVydGljYWw6IEJvb2xlYW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcHA6IG51bGwsCiAgICAgIG9sZFZhbHVlOiBudWxsLAogICAgICBrZXlQcmVzc2VkOiAwLAogICAgICBpc0ZvY3VzZWQ6IGZhbHNlLAogICAgICBpc0FjdGl2ZTogZmFsc2UsCiAgICAgIG5vQ2xpY2s6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNsYXNzZXM6IGZ1bmN0aW9uIGNsYXNzZXMoKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIFZJbnB1dC5vcHRpb25zLmNvbXB1dGVkLmNsYXNzZXMuY2FsbCh0aGlzKSksIHt9LCB7CiAgICAgICAgJ3YtaW5wdXRfX3NsaWRlcic6IHRydWUsCiAgICAgICAgJ3YtaW5wdXRfX3NsaWRlci0tdmVydGljYWwnOiB0aGlzLnZlcnRpY2FsLAogICAgICAgICd2LWlucHV0X19zbGlkZXItLWludmVyc2UtbGFiZWwnOiB0aGlzLmludmVyc2VMYWJlbAogICAgICB9KTsKICAgIH0sCiAgICBpbnRlcm5hbFZhbHVlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLmxhenlWYWx1ZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdmFsID0gaXNOYU4odmFsKSA/IHRoaXMubWluVmFsdWUgOiB2YWw7IC8vIFJvdW5kIHZhbHVlIHRvIGVuc3VyZSB0aGUKICAgICAgICAvLyBlbnRpcmUgc2xpZGVyIHJhbmdlIGNhbgogICAgICAgIC8vIGJlIHNlbGVjdGVkIHdpdGggc3RlcAoKICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnJvdW5kVmFsdWUoTWF0aC5taW4oTWF0aC5tYXgodmFsLCB0aGlzLm1pblZhbHVlKSwgdGhpcy5tYXhWYWx1ZSkpOwogICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5sYXp5VmFsdWUpIHJldHVybjsKICAgICAgICB0aGlzLmxhenlWYWx1ZSA9IHZhbHVlOwogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgdHJhY2tUcmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFja1RyYW5zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmtleVByZXNzZWQgPj0gMiA/ICdub25lJyA6ICcnOwogICAgfSwKICAgIG1pblZhbHVlOiBmdW5jdGlvbiBtaW5WYWx1ZSgpIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy5taW4pOwogICAgfSwKICAgIG1heFZhbHVlOiBmdW5jdGlvbiBtYXhWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy5tYXgpOwogICAgfSwKICAgIHN0ZXBOdW1lcmljOiBmdW5jdGlvbiBzdGVwTnVtZXJpYygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RlcCA+IDAgPyBwYXJzZUZsb2F0KHRoaXMuc3RlcCkgOiAwOwogICAgfSwKICAgIGlucHV0V2lkdGg6IGZ1bmN0aW9uIGlucHV0V2lkdGgoKSB7CiAgICAgIHZhciB2YWx1ZSA9ICh0aGlzLnJvdW5kVmFsdWUodGhpcy5pbnRlcm5hbFZhbHVlKSAtIHRoaXMubWluVmFsdWUpIC8gKHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKSAqIDEwMDsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSwKICAgIHRyYWNrRmlsbFN0eWxlczogZnVuY3Rpb24gdHJhY2tGaWxsU3R5bGVzKCkgewogICAgICB2YXIgX3JlZjsKCiAgICAgIHZhciBzdGFydERpciA9IHRoaXMudmVydGljYWwgPyAnYm90dG9tJyA6ICdsZWZ0JzsKICAgICAgdmFyIGVuZERpciA9IHRoaXMudmVydGljYWwgPyAndG9wJyA6ICdyaWdodCc7CiAgICAgIHZhciB2YWx1ZURpciA9IHRoaXMudmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7CiAgICAgIHZhciBzdGFydCA9IHRoaXMuJHZ1ZXRpZnkucnRsID8gJ2F1dG8nIDogJzAnOwogICAgICB2YXIgZW5kID0gdGhpcy4kdnVldGlmeS5ydGwgPyAnMCcgOiAnYXV0byc7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuaXNEaXNhYmxlZCA/ICJjYWxjKCIuY29uY2F0KHRoaXMuaW5wdXRXaWR0aCwgIiUgLSAxMHB4KSIpIDogIiIuY29uY2F0KHRoaXMuaW5wdXRXaWR0aCwgIiUiKTsKICAgICAgcmV0dXJuIF9yZWYgPSB7CiAgICAgICAgdHJhbnNpdGlvbjogdGhpcy50cmFja1RyYW5zaXRpb24KICAgICAgfSwgX2RlZmluZVByb3BlcnR5KF9yZWYsIHN0YXJ0RGlyLCBzdGFydCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCBlbmREaXIsIGVuZCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCB2YWx1ZURpciwgdmFsdWUpLCBfcmVmOwogICAgfSwKICAgIHRyYWNrU3R5bGVzOiBmdW5jdGlvbiB0cmFja1N0eWxlcygpIHsKICAgICAgdmFyIF9yZWYyOwoKICAgICAgdmFyIHN0YXJ0RGlyID0gdGhpcy52ZXJ0aWNhbCA/IHRoaXMuJHZ1ZXRpZnkucnRsID8gJ2JvdHRvbScgOiAndG9wJyA6IHRoaXMuJHZ1ZXRpZnkucnRsID8gJ2xlZnQnIDogJ3JpZ2h0JzsKICAgICAgdmFyIGVuZERpciA9IHRoaXMudmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7CiAgICAgIHZhciBzdGFydCA9ICcwcHgnOwogICAgICB2YXIgZW5kID0gdGhpcy5pc0Rpc2FibGVkID8gImNhbGMoIi5jb25jYXQoMTAwIC0gdGhpcy5pbnB1dFdpZHRoLCAiJSAtIDEwcHgpIikgOiAiY2FsYygiLmNvbmNhdCgxMDAgLSB0aGlzLmlucHV0V2lkdGgsICIlKSIpOwogICAgICByZXR1cm4gX3JlZjIgPSB7CiAgICAgICAgdHJhbnNpdGlvbjogdGhpcy50cmFja1RyYW5zaXRpb24KICAgICAgfSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBzdGFydERpciwgc3RhcnQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIGVuZERpciwgZW5kKSwgX3JlZjI7CiAgICB9LAogICAgc2hvd1RpY2tzOiBmdW5jdGlvbiBzaG93VGlja3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpY2tMYWJlbHMubGVuZ3RoID4gMCB8fCAhISghdGhpcy5pc0Rpc2FibGVkICYmIHRoaXMuc3RlcE51bWVyaWMgJiYgdGhpcy50aWNrcyk7CiAgICB9LAogICAgbnVtVGlja3M6IGZ1bmN0aW9uIG51bVRpY2tzKCkgewogICAgICByZXR1cm4gTWF0aC5jZWlsKCh0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSkgLyB0aGlzLnN0ZXBOdW1lcmljKTsKICAgIH0sCiAgICBzaG93VGh1bWJMYWJlbDogZnVuY3Rpb24gc2hvd1RodW1iTGFiZWwoKSB7CiAgICAgIHJldHVybiAhdGhpcy5pc0Rpc2FibGVkICYmICEhKHRoaXMudGh1bWJMYWJlbCB8fCB0aGlzLiRzY29wZWRTbG90c1sndGh1bWItbGFiZWwnXSk7CiAgICB9LAogICAgY29tcHV0ZWRUcmFja0NvbG9yOiBmdW5jdGlvbiBjb21wdXRlZFRyYWNrQ29sb3IoKSB7CiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQpIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIGlmICh0aGlzLnRyYWNrQ29sb3IpIHJldHVybiB0aGlzLnRyYWNrQ29sb3I7CiAgICAgIGlmICh0aGlzLmlzRGFyaykgcmV0dXJuIHRoaXMudmFsaWRhdGlvblN0YXRlOwogICAgICByZXR1cm4gdGhpcy52YWxpZGF0aW9uU3RhdGUgfHwgJ3ByaW1hcnkgbGlnaHRlbi0zJzsKICAgIH0sCiAgICBjb21wdXRlZFRyYWNrRmlsbENvbG9yOiBmdW5jdGlvbiBjb21wdXRlZFRyYWNrRmlsbENvbG9yKCkgewogICAgICBpZiAodGhpcy5pc0Rpc2FibGVkKSByZXR1cm4gdW5kZWZpbmVkOwogICAgICBpZiAodGhpcy50cmFja0ZpbGxDb2xvcikgcmV0dXJuIHRoaXMudHJhY2tGaWxsQ29sb3I7CiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25TdGF0ZSB8fCB0aGlzLmNvbXB1dGVkQ29sb3I7CiAgICB9LAogICAgY29tcHV0ZWRUaHVtYkNvbG9yOiBmdW5jdGlvbiBjb21wdXRlZFRodW1iQ29sb3IoKSB7CiAgICAgIGlmICh0aGlzLnRodW1iQ29sb3IpIHJldHVybiB0aGlzLnRodW1iQ29sb3I7CiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25TdGF0ZSB8fCB0aGlzLmNvbXB1dGVkQ29sb3I7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbWluOiBmdW5jdGlvbiBtaW4odmFsKSB7CiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgIHBhcnNlZCA+IHRoaXMuaW50ZXJuYWxWYWx1ZSAmJiB0aGlzLiRlbWl0KCdpbnB1dCcsIHBhcnNlZCk7CiAgICB9LAogICAgbWF4OiBmdW5jdGlvbiBtYXgodmFsKSB7CiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgIHBhcnNlZCA8IHRoaXMuaW50ZXJuYWxWYWx1ZSAmJiB0aGlzLiRlbWl0KCdpbnB1dCcsIHBhcnNlZCk7CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2KSB7CiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlID0gdjsKICAgICAgfQogICAgfQogIH0sCiAgLy8gSWYgZG9uZSBpbiBhcyBpbW1lZGlhdGUgaW4KICAvLyB2YWx1ZSB3YXRjaGVyLCBjYXVzZXMgaXNzdWVzCiAgLy8gd2l0aCB2dWUtdGVzdC11dGlscwogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuaW50ZXJuYWxWYWx1ZSA9IHRoaXMudmFsdWU7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gV2l0aG91dCBhIHYtYXBwLCBpT1MgZG9lcyBub3Qgd29yayB3aXRoIGJvZHkgc2VsZWN0b3JzCiAgICB0aGlzLmFwcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFwcF0nKSB8fCBjb25zb2xlV2FybignTWlzc2luZyB2LWFwcCBvciBhIG5vbi1ib2R5IHdyYXBwaW5nIGVsZW1lbnQgd2l0aCB0aGUgW2RhdGEtYXBwXSBhdHRyaWJ1dGUnLCB0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdlbkRlZmF1bHRTbG90OiBmdW5jdGlvbiBnZW5EZWZhdWx0U2xvdCgpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gW3RoaXMuZ2VuTGFiZWwoKV07CiAgICAgIHZhciBzbGlkZXIgPSB0aGlzLmdlblNsaWRlcigpOwogICAgICB0aGlzLmludmVyc2VMYWJlbCA/IGNoaWxkcmVuLnVuc2hpZnQoc2xpZGVyKSA6IGNoaWxkcmVuLnB1c2goc2xpZGVyKTsKICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmdlblByb2dyZXNzKCkpOwogICAgICByZXR1cm4gY2hpbGRyZW47CiAgICB9LAogICAgZ2VuU2xpZGVyOiBmdW5jdGlvbiBnZW5TbGlkZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgY2xhc3M6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgJ3Ytc2xpZGVyJzogdHJ1ZSwKICAgICAgICAgICd2LXNsaWRlci0taG9yaXpvbnRhbCc6ICF0aGlzLnZlcnRpY2FsLAogICAgICAgICAgJ3Ytc2xpZGVyLS12ZXJ0aWNhbCc6IHRoaXMudmVydGljYWwsCiAgICAgICAgICAndi1zbGlkZXItLWZvY3VzZWQnOiB0aGlzLmlzRm9jdXNlZCwKICAgICAgICAgICd2LXNsaWRlci0tYWN0aXZlJzogdGhpcy5pc0FjdGl2ZSwKICAgICAgICAgICd2LXNsaWRlci0tZGlzYWJsZWQnOiB0aGlzLmlzRGlzYWJsZWQsCiAgICAgICAgICAndi1zbGlkZXItLXJlYWRvbmx5JzogdGhpcy5pc1JlYWRvbmx5CiAgICAgICAgfSwgdGhpcy50aGVtZUNsYXNzZXMpLAogICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICBuYW1lOiAnY2xpY2stb3V0c2lkZScsCiAgICAgICAgICB2YWx1ZTogdGhpcy5vbkJsdXIKICAgICAgICB9XSwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IHRoaXMub25TbGlkZXJDbGljawogICAgICAgIH0KICAgICAgfSwgdGhpcy5nZW5DaGlsZHJlbigpKTsKICAgIH0sCiAgICBnZW5DaGlsZHJlbjogZnVuY3Rpb24gZ2VuQ2hpbGRyZW4oKSB7CiAgICAgIHJldHVybiBbdGhpcy5nZW5JbnB1dCgpLCB0aGlzLmdlblRyYWNrQ29udGFpbmVyKCksIHRoaXMuZ2VuU3RlcHMoKSwgdGhpcy5nZW5UaHVtYkNvbnRhaW5lcih0aGlzLmludGVybmFsVmFsdWUsIHRoaXMuaW5wdXRXaWR0aCwgdGhpcy5pc0FjdGl2ZSwgdGhpcy5pc0ZvY3VzZWQsIHRoaXMub25UaHVtYk1vdXNlRG93biwgdGhpcy5vbkZvY3VzLCB0aGlzLm9uQmx1cildOwogICAgfSwKICAgIGdlbklucHV0OiBmdW5jdGlvbiBnZW5JbnB1dCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgewogICAgICAgIGF0dHJzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIHZhbHVlOiB0aGlzLmludGVybmFsVmFsdWUsCiAgICAgICAgICBpZDogdGhpcy5jb21wdXRlZElkLAogICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZCwKICAgICAgICAgIHJlYWRvbmx5OiB0cnVlLAogICAgICAgICAgdGFiaW5kZXg6IC0xCiAgICAgICAgfSwgdGhpcy4kYXR0cnMpCiAgICAgIH0pOwogICAgfSwKICAgIGdlblRyYWNrQ29udGFpbmVyOiBmdW5jdGlvbiBnZW5UcmFja0NvbnRhaW5lcigpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gW3RoaXMuJGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHRoaXMuc2V0QmFja2dyb3VuZENvbG9yKHRoaXMuY29tcHV0ZWRUcmFja0NvbG9yLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LXNsaWRlcl9fdHJhY2stYmFja2dyb3VuZCcsCiAgICAgICAgc3R5bGU6IHRoaXMudHJhY2tTdHlsZXMKICAgICAgfSkpLCB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB0aGlzLnNldEJhY2tncm91bmRDb2xvcih0aGlzLmNvbXB1dGVkVHJhY2tGaWxsQ29sb3IsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190cmFjay1maWxsJywKICAgICAgICBzdHlsZTogdGhpcy50cmFja0ZpbGxTdHlsZXMKICAgICAgfSkpXTsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190cmFjay1jb250YWluZXInLAogICAgICAgIHJlZjogJ3RyYWNrJwogICAgICB9LCBjaGlsZHJlbik7CiAgICB9LAogICAgZ2VuU3RlcHM6IGZ1bmN0aW9uIGdlblN0ZXBzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnN0ZXAgfHwgIXRoaXMuc2hvd1RpY2tzKSByZXR1cm4gbnVsbDsKICAgICAgdmFyIHRpY2tTaXplID0gcGFyc2VGbG9hdCh0aGlzLnRpY2tTaXplKTsKICAgICAgdmFyIHJhbmdlID0gY3JlYXRlUmFuZ2UodGhpcy5udW1UaWNrcyArIDEpOwogICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy52ZXJ0aWNhbCA/ICdib3R0b20nIDogdGhpcy4kdnVldGlmeS5ydGwgPyAncmlnaHQnIDogJ2xlZnQnOwogICAgICB2YXIgb2Zmc2V0RGlyZWN0aW9uID0gdGhpcy52ZXJ0aWNhbCA/IHRoaXMuJHZ1ZXRpZnkucnRsID8gJ2xlZnQnIDogJ3JpZ2h0JyA6ICd0b3AnOwogICAgICBpZiAodGhpcy52ZXJ0aWNhbCkgcmFuZ2UucmV2ZXJzZSgpOwogICAgICB2YXIgdGlja3MgPSByYW5nZS5tYXAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgdmFyIF9zdHlsZTsKCiAgICAgICAgdmFyIGNoaWxkcmVuID0gW107CgogICAgICAgIGlmIChfdGhpcy50aWNrTGFiZWxzW2luZGV4XSkgewogICAgICAgICAgY2hpbGRyZW4ucHVzaChfdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190aWNrLWxhYmVsJwogICAgICAgICAgfSwgX3RoaXMudGlja0xhYmVsc1tpbmRleF0pKTsKICAgICAgICB9CgogICAgICAgIHZhciB3aWR0aCA9IGluZGV4ICogKDEwMCAvIF90aGlzLm51bVRpY2tzKTsKICAgICAgICB2YXIgZmlsbGVkID0gX3RoaXMuJHZ1ZXRpZnkucnRsID8gMTAwIC0gX3RoaXMuaW5wdXRXaWR0aCA8IHdpZHRoIDogd2lkdGggPCBfdGhpcy5pbnB1dFdpZHRoOwogICAgICAgIHJldHVybiBfdGhpcy4kY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190aWNrJywKICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgICd2LXNsaWRlcl9fdGljay0tZmlsbGVkJzogZmlsbGVkCiAgICAgICAgICB9LAogICAgICAgICAgc3R5bGU6IChfc3R5bGUgPSB7CiAgICAgICAgICAgIHdpZHRoOiAiIi5jb25jYXQodGlja1NpemUsICJweCIpLAogICAgICAgICAgICBoZWlnaHQ6ICIiLmNvbmNhdCh0aWNrU2l6ZSwgInB4IikKICAgICAgICAgIH0sIF9kZWZpbmVQcm9wZXJ0eShfc3R5bGUsIGRpcmVjdGlvbiwgImNhbGMoIi5jb25jYXQod2lkdGgsICIlIC0gIikuY29uY2F0KHRpY2tTaXplIC8gMiwgInB4KSIpKSwgX2RlZmluZVByb3BlcnR5KF9zdHlsZSwgb2Zmc2V0RGlyZWN0aW9uLCAiY2FsYyg1MCUgLSAiLmNvbmNhdCh0aWNrU2l6ZSAvIDIsICJweCkiKSksIF9zdHlsZSkKICAgICAgICB9LCBjaGlsZHJlbik7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1zbGlkZXJfX3RpY2tzLWNvbnRhaW5lcicsCiAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICd2LXNsaWRlcl9fdGlja3MtY29udGFpbmVyLS1hbHdheXMtc2hvdyc6IHRoaXMudGlja3MgPT09ICdhbHdheXMnIHx8IHRoaXMudGlja0xhYmVscy5sZW5ndGggPiAwCiAgICAgICAgfQogICAgICB9LCB0aWNrcyk7CiAgICB9LAogICAgZ2VuVGh1bWJDb250YWluZXI6IGZ1bmN0aW9uIGdlblRodW1iQ29udGFpbmVyKHZhbHVlLCB2YWx1ZVdpZHRoLCBpc0FjdGl2ZSwgaXNGb2N1c2VkLCBvbkRyYWcsIG9uRm9jdXMsIG9uQmx1cikgewogICAgICB2YXIgcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDcgJiYgYXJndW1lbnRzWzddICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbN10gOiAndGh1bWInOwogICAgICB2YXIgY2hpbGRyZW4gPSBbdGhpcy5nZW5UaHVtYigpXTsKICAgICAgdmFyIHRodW1iTGFiZWxDb250ZW50ID0gdGhpcy5nZW5UaHVtYkxhYmVsQ29udGVudCh2YWx1ZSk7CiAgICAgIHRoaXMuc2hvd1RodW1iTGFiZWwgJiYgY2hpbGRyZW4ucHVzaCh0aGlzLmdlblRodW1iTGFiZWwodGh1bWJMYWJlbENvbnRlbnQpKTsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHRoaXMuc2V0VGV4dENvbG9yKHRoaXMuY29tcHV0ZWRUaHVtYkNvbG9yLCB7CiAgICAgICAgcmVmOiByZWYsCiAgICAgICAga2V5OiByZWYsCiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LXNsaWRlcl9fdGh1bWItY29udGFpbmVyJywKICAgICAgICBjbGFzczogewogICAgICAgICAgJ3Ytc2xpZGVyX190aHVtYi1jb250YWluZXItLWFjdGl2ZSc6IGlzQWN0aXZlLAogICAgICAgICAgJ3Ytc2xpZGVyX190aHVtYi1jb250YWluZXItLWZvY3VzZWQnOiBpc0ZvY3VzZWQsCiAgICAgICAgICAndi1zbGlkZXJfX3RodW1iLWNvbnRhaW5lci0tc2hvdy1sYWJlbCc6IHRoaXMuc2hvd1RodW1iTGFiZWwKICAgICAgICB9LAogICAgICAgIHN0eWxlOiB0aGlzLmdldFRodW1iQ29udGFpbmVyU3R5bGVzKHZhbHVlV2lkdGgpLAogICAgICAgIGF0dHJzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIHJvbGU6ICdzbGlkZXInLAogICAgICAgICAgdGFiaW5kZXg6IHRoaXMuaXNEaXNhYmxlZCA/IC0xIDogdGhpcy4kYXR0cnMudGFiaW5kZXggPyB0aGlzLiRhdHRycy50YWJpbmRleCA6IDAsCiAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMubGFiZWwsCiAgICAgICAgICAnYXJpYS12YWx1ZW1pbic6IHRoaXMubWluLAogICAgICAgICAgJ2FyaWEtdmFsdWVtYXgnOiB0aGlzLm1heCwKICAgICAgICAgICdhcmlhLXZhbHVlbm93JzogdGhpcy5pbnRlcm5hbFZhbHVlLAogICAgICAgICAgJ2FyaWEtcmVhZG9ubHknOiBTdHJpbmcodGhpcy5pc1JlYWRvbmx5KSwKICAgICAgICAgICdhcmlhLW9yaWVudGF0aW9uJzogdGhpcy52ZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcKICAgICAgICB9LCB0aGlzLiRhdHRycyksCiAgICAgICAgb246IHsKICAgICAgICAgIGZvY3VzOiBvbkZvY3VzLAogICAgICAgICAgYmx1cjogb25CbHVyLAogICAgICAgICAga2V5ZG93bjogdGhpcy5vbktleURvd24sCiAgICAgICAgICBrZXl1cDogdGhpcy5vbktleVVwLAogICAgICAgICAgdG91Y2hzdGFydDogb25EcmFnLAogICAgICAgICAgbW91c2Vkb3duOiBvbkRyYWcKICAgICAgICB9CiAgICAgIH0pLCBjaGlsZHJlbik7CiAgICB9LAogICAgZ2VuVGh1bWJMYWJlbENvbnRlbnQ6IGZ1bmN0aW9uIGdlblRodW1iTGFiZWxDb250ZW50KHZhbHVlKSB7CiAgICAgIHJldHVybiB0aGlzLiRzY29wZWRTbG90c1sndGh1bWItbGFiZWwnXSA/IHRoaXMuJHNjb3BlZFNsb3RzWyd0aHVtYi1sYWJlbCddKHsKICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgfSkgOiBbdGhpcy4kY3JlYXRlRWxlbWVudCgnc3BhbicsIFtTdHJpbmcodmFsdWUpXSldOwogICAgfSwKICAgIGdlblRodW1iTGFiZWw6IGZ1bmN0aW9uIGdlblRodW1iTGFiZWwoY29udGVudCkgewogICAgICB2YXIgc2l6ZSA9IGNvbnZlcnRUb1VuaXQodGhpcy50aHVtYlNpemUpOwogICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy52ZXJ0aWNhbCA/ICJ0cmFuc2xhdGVZKDIwJSkgdHJhbnNsYXRlWSgiLmNvbmNhdChOdW1iZXIodGhpcy50aHVtYlNpemUpIC8gMyAtIDEsICJweCkgdHJhbnNsYXRlWCg1NSUpIHJvdGF0ZSgxMzVkZWcpIikgOiAidHJhbnNsYXRlWSgtMjAlKSB0cmFuc2xhdGVZKC0xMnB4KSB0cmFuc2xhdGVYKC01MCUpIHJvdGF0ZSg0NWRlZykiOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWU2NhbGVUcmFuc2l0aW9uLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIG9yaWdpbjogJ2JvdHRvbSBjZW50ZXInCiAgICAgICAgfQogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1zbGlkZXJfX3RodW1iLWxhYmVsLWNvbnRhaW5lcicsCiAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgIG5hbWU6ICdzaG93JywKICAgICAgICAgIHZhbHVlOiB0aGlzLmlzRm9jdXNlZCB8fCB0aGlzLmlzQWN0aXZlIHx8IHRoaXMudGh1bWJMYWJlbCA9PT0gJ2Fsd2F5cycKICAgICAgICB9XQogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IodGhpcy5jb21wdXRlZFRodW1iQ29sb3IsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190aHVtYi1sYWJlbCcsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGhlaWdodDogc2l6ZSwKICAgICAgICAgIHdpZHRoOiBzaXplLAogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0KICAgICAgICB9CiAgICAgIH0pLCBbdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgY29udGVudCldKV0pXSk7CiAgICB9LAogICAgZ2VuVGh1bWI6IGZ1bmN0aW9uIGdlblRodW1iKCkgewogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IodGhpcy5jb21wdXRlZFRodW1iQ29sb3IsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2xpZGVyX190aHVtYicKICAgICAgfSkpOwogICAgfSwKICAgIGdldFRodW1iQ29udGFpbmVyU3R5bGVzOiBmdW5jdGlvbiBnZXRUaHVtYkNvbnRhaW5lclN0eWxlcyh3aWR0aCkgewogICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy52ZXJ0aWNhbCA/ICd0b3AnIDogJ2xlZnQnOwogICAgICB2YXIgdmFsdWUgPSB0aGlzLiR2dWV0aWZ5LnJ0bCA/IDEwMCAtIHdpZHRoIDogd2lkdGg7CiAgICAgIHZhbHVlID0gdGhpcy52ZXJ0aWNhbCA/IDEwMCAtIHZhbHVlIDogdmFsdWU7CiAgICAgIHJldHVybiBfZGVmaW5lUHJvcGVydHkoewogICAgICAgIHRyYW5zaXRpb246IHRoaXMudHJhY2tUcmFuc2l0aW9uCiAgICAgIH0sIGRpcmVjdGlvbiwgIiIuY29uY2F0KHZhbHVlLCAiJSIpKTsKICAgIH0sCiAgICBvblRodW1iTW91c2VEb3duOiBmdW5jdGlvbiBvblRodW1iTW91c2VEb3duKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy5pbnRlcm5hbFZhbHVlOwogICAgICB0aGlzLmtleVByZXNzZWQgPSAyOwogICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgdmFyIG1vdXNlVXBPcHRpb25zID0gcGFzc2l2ZVN1cHBvcnRlZCA/IHsKICAgICAgICBwYXNzaXZlOiB0cnVlLAogICAgICAgIGNhcHR1cmU6IHRydWUKICAgICAgfSA6IHRydWU7CiAgICAgIHZhciBtb3VzZU1vdmVPcHRpb25zID0gcGFzc2l2ZVN1cHBvcnRlZCA/IHsKICAgICAgICBwYXNzaXZlOiB0cnVlCiAgICAgIH0gOiBmYWxzZTsKCiAgICAgIGlmICgndG91Y2hlcycgaW4gZSkgewogICAgICAgIHRoaXMuYXBwLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Nb3VzZU1vdmUsIG1vdXNlTW92ZU9wdGlvbnMpOwogICAgICAgIGFkZE9uY2VFdmVudExpc3RlbmVyKHRoaXMuYXBwLCAndG91Y2hlbmQnLCB0aGlzLm9uU2xpZGVyTW91c2VVcCwgbW91c2VVcE9wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXBwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUsIG1vdXNlTW92ZU9wdGlvbnMpOwogICAgICAgIGFkZE9uY2VFdmVudExpc3RlbmVyKHRoaXMuYXBwLCAnbW91c2V1cCcsIHRoaXMub25TbGlkZXJNb3VzZVVwLCBtb3VzZVVwT3B0aW9ucyk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ3N0YXJ0JywgdGhpcy5pbnRlcm5hbFZhbHVlKTsKICAgIH0sCiAgICBvblNsaWRlck1vdXNlVXA6IGZ1bmN0aW9uIG9uU2xpZGVyTW91c2VVcChlKSB7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHRoaXMua2V5UHJlc3NlZCA9IDA7CiAgICAgIHZhciBtb3VzZU1vdmVPcHRpb25zID0gcGFzc2l2ZVN1cHBvcnRlZCA/IHsKICAgICAgICBwYXNzaXZlOiB0cnVlCiAgICAgIH0gOiBmYWxzZTsKICAgICAgdGhpcy5hcHAucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgbW91c2VNb3ZlT3B0aW9ucyk7CiAgICAgIHRoaXMuYXBwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUsIG1vdXNlTW92ZU9wdGlvbnMpOwogICAgICB0aGlzLiRlbWl0KCdtb3VzZXVwJywgZSk7CiAgICAgIHRoaXMuJGVtaXQoJ2VuZCcsIHRoaXMuaW50ZXJuYWxWYWx1ZSk7CgogICAgICBpZiAoIWRlZXBFcXVhbCh0aGlzLm9sZFZhbHVlLCB0aGlzLmludGVybmFsVmFsdWUpKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5pbnRlcm5hbFZhbHVlKTsKICAgICAgICB0aGlzLm5vQ2xpY2sgPSB0cnVlOwogICAgICB9CgogICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7CiAgICB9LAogICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGUpIHsKICAgICAgdmFyIF90aGlzJHBhcnNlTW91c2VNb3ZlID0gdGhpcy5wYXJzZU1vdXNlTW92ZShlKSwKICAgICAgICAgIHZhbHVlID0gX3RoaXMkcGFyc2VNb3VzZU1vdmUudmFsdWU7CgogICAgICB0aGlzLmludGVybmFsVmFsdWUgPSB2YWx1ZTsKICAgIH0sCiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7CiAgICAgIGlmICghdGhpcy5pc0ludGVyYWN0aXZlKSByZXR1cm47CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMucGFyc2VLZXlEb3duKGUsIHRoaXMuaW50ZXJuYWxWYWx1ZSk7CiAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlIDwgdGhpcy5taW5WYWx1ZSB8fCB2YWx1ZSA+IHRoaXMubWF4VmFsdWUpIHJldHVybjsKICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbHVlKTsKICAgIH0sCiAgICBvbktleVVwOiBmdW5jdGlvbiBvbktleVVwKCkgewogICAgICB0aGlzLmtleVByZXNzZWQgPSAwOwogICAgfSwKICAgIG9uU2xpZGVyQ2xpY2s6IGZ1bmN0aW9uIG9uU2xpZGVyQ2xpY2soZSkgewogICAgICBpZiAodGhpcy5ub0NsaWNrKSB7CiAgICAgICAgdGhpcy5ub0NsaWNrID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGh1bWIgPSB0aGlzLiRyZWZzLnRodW1iOwogICAgICB0aHVtYi5mb2N1cygpOwogICAgICB0aGlzLm9uTW91c2VNb3ZlKGUpOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmludGVybmFsVmFsdWUpOwogICAgfSwKICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKGUpIHsKICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsKICAgICAgdGhpcy4kZW1pdCgnYmx1cicsIGUpOwogICAgfSwKICAgIG9uRm9jdXM6IGZ1bmN0aW9uIG9uRm9jdXMoZSkgewogICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7CiAgICAgIHRoaXMuJGVtaXQoJ2ZvY3VzJywgZSk7CiAgICB9LAogICAgcGFyc2VNb3VzZU1vdmU6IGZ1bmN0aW9uIHBhcnNlTW91c2VNb3ZlKGUpIHsKICAgICAgdmFyIHN0YXJ0ID0gdGhpcy52ZXJ0aWNhbCA/ICd0b3AnIDogJ2xlZnQnOwogICAgICB2YXIgbGVuZ3RoID0gdGhpcy52ZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJzsKICAgICAgdmFyIGNsaWNrID0gdGhpcy52ZXJ0aWNhbCA/ICdjbGllbnRZJyA6ICdjbGllbnRYJzsKCiAgICAgIHZhciBfdGhpcyQkcmVmcyR0cmFjayRnZXQgPSB0aGlzLiRyZWZzLnRyYWNrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICAgdHJhY2tTdGFydCA9IF90aGlzJCRyZWZzJHRyYWNrJGdldFtzdGFydF0sCiAgICAgICAgICB0cmFja0xlbmd0aCA9IF90aGlzJCRyZWZzJHRyYWNrJGdldFtsZW5ndGhdOwoKICAgICAgdmFyIGNsaWNrT2Zmc2V0ID0gJ3RvdWNoZXMnIGluIGUgPyBlLnRvdWNoZXNbMF1bY2xpY2tdIDogZVtjbGlja107IC8vIENhbiB3ZSBnZXQgcmlkIG9mIGFueSBoZXJlPwogICAgICAvLyBJdCBpcyBwb3NzaWJsZSBmb3IgbGVmdCB0byBiZSBOYU4sIGZvcmNlIHRvIG51bWJlcgoKICAgICAgdmFyIGNsaWNrUG9zID0gTWF0aC5taW4oTWF0aC5tYXgoKGNsaWNrT2Zmc2V0IC0gdHJhY2tTdGFydCkgLyB0cmFja0xlbmd0aCwgMCksIDEpIHx8IDA7CiAgICAgIGlmICh0aGlzLnZlcnRpY2FsKSBjbGlja1BvcyA9IDEgLSBjbGlja1BvczsKICAgICAgaWYgKHRoaXMuJHZ1ZXRpZnkucnRsKSBjbGlja1BvcyA9IDEgLSBjbGlja1BvczsKICAgICAgdmFyIGlzSW5zaWRlVHJhY2sgPSBjbGlja09mZnNldCA+PSB0cmFja1N0YXJ0ICYmIGNsaWNrT2Zmc2V0IDw9IHRyYWNrU3RhcnQgKyB0cmFja0xlbmd0aDsKICAgICAgdmFyIHZhbHVlID0gcGFyc2VGbG9hdCh0aGlzLm1pbikgKyBjbGlja1BvcyAqICh0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGlzSW5zaWRlVHJhY2s6IGlzSW5zaWRlVHJhY2sKICAgICAgfTsKICAgIH0sCiAgICBwYXJzZUtleURvd246IGZ1bmN0aW9uIHBhcnNlS2V5RG93bihlLCB2YWx1ZSkgewogICAgICBpZiAoIXRoaXMuaXNJbnRlcmFjdGl2ZSkgcmV0dXJuOwogICAgICB2YXIgcGFnZXVwID0ga2V5Q29kZXMucGFnZXVwLAogICAgICAgICAgcGFnZWRvd24gPSBrZXlDb2Rlcy5wYWdlZG93biwKICAgICAgICAgIGVuZCA9IGtleUNvZGVzLmVuZCwKICAgICAgICAgIGhvbWUgPSBrZXlDb2Rlcy5ob21lLAogICAgICAgICAgbGVmdCA9IGtleUNvZGVzLmxlZnQsCiAgICAgICAgICByaWdodCA9IGtleUNvZGVzLnJpZ2h0LAogICAgICAgICAgZG93biA9IGtleUNvZGVzLmRvd24sCiAgICAgICAgICB1cCA9IGtleUNvZGVzLnVwOwogICAgICBpZiAoIVtwYWdldXAsIHBhZ2Vkb3duLCBlbmQsIGhvbWUsIGxlZnQsIHJpZ2h0LCBkb3duLCB1cF0uaW5jbHVkZXMoZS5rZXlDb2RlKSkgcmV0dXJuOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwTnVtZXJpYyB8fCAxOwogICAgICB2YXIgc3RlcHMgPSAodGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpIC8gc3RlcDsKCiAgICAgIGlmIChbbGVmdCwgcmlnaHQsIGRvd24sIHVwXS5pbmNsdWRlcyhlLmtleUNvZGUpKSB7CiAgICAgICAgdGhpcy5rZXlQcmVzc2VkICs9IDE7CiAgICAgICAgdmFyIGluY3JlYXNlID0gdGhpcy4kdnVldGlmeS5ydGwgPyBbbGVmdCwgdXBdIDogW3JpZ2h0LCB1cF07CiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGluY3JlYXNlLmluY2x1ZGVzKGUua2V5Q29kZSkgPyAxIDogLTE7CiAgICAgICAgdmFyIG11bHRpcGxpZXIgPSBlLnNoaWZ0S2V5ID8gMyA6IGUuY3RybEtleSA/IDIgOiAxOwogICAgICAgIHZhbHVlID0gdmFsdWUgKyBkaXJlY3Rpb24gKiBzdGVwICogbXVsdGlwbGllcjsKICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IGhvbWUpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMubWluVmFsdWU7CiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBlbmQpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMubWF4VmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9kaXJlY3Rpb24gPSBlLmtleUNvZGUgPT09IHBhZ2Vkb3duID8gMSA6IC0xOwoKICAgICAgICB2YWx1ZSA9IHZhbHVlIC0gX2RpcmVjdGlvbiAqIHN0ZXAgKiAoc3RlcHMgPiAxMDAgPyBzdGVwcyAvIDEwIDogMTApOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAogICAgcm91bmRWYWx1ZTogZnVuY3Rpb24gcm91bmRWYWx1ZSh2YWx1ZSkgewogICAgICBpZiAoIXRoaXMuc3RlcE51bWVyaWMpIHJldHVybiB2YWx1ZTsgLy8gRm9ybWF0IGlucHV0IHZhbHVlIHVzaW5nIHRoZSBzYW1lIG51bWJlcgogICAgICAvLyBvZiBkZWNpbWFscyBwbGFjZXMgYXMgaW4gdGhlIHN0ZXAgcHJvcAoKICAgICAgdmFyIHRyaW1tZWRTdGVwID0gdGhpcy5zdGVwLnRvU3RyaW5nKCkudHJpbSgpOwogICAgICB2YXIgZGVjaW1hbHMgPSB0cmltbWVkU3RlcC5pbmRleE9mKCcuJykgPiAtMSA/IHRyaW1tZWRTdGVwLmxlbmd0aCAtIHRyaW1tZWRTdGVwLmluZGV4T2YoJy4nKSAtIDEgOiAwOwogICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5taW5WYWx1ZSAlIHRoaXMuc3RlcE51bWVyaWM7CiAgICAgIHZhciBuZXdWYWx1ZSA9IE1hdGgucm91bmQoKHZhbHVlIC0gb2Zmc2V0KSAvIHRoaXMuc3RlcE51bWVyaWMpICogdGhpcy5zdGVwTnVtZXJpYyArIG9mZnNldDsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoTWF0aC5taW4obmV3VmFsdWUsIHRoaXMubWF4VmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpKTsKICAgIH0KICB9Cn0pOw=="},null]}